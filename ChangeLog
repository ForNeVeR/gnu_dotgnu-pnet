
2001-08-17  Rhys Weatherley  <rweather@southern-storm.com.au>

* image/java_loader.c: add support for .jar files to the loader.

* ilnative/ilnative.c (printNatives): remove a previous hack that
recognised any empty method as native, and then add code to recognise
the "native" and "runtime" implementation types.

* include/il_program.h, image/test_macros.c: add the "ILMethod_IsJavaFPStruct"
and "ILMethod_IsJava" helper macros.

* ilasm/ilasm_grammar.y (Float64): remove the '[' form of floating
point constants and alter the '(' form to be ECMA-compliant.

2001-08-16  Rhys Weatherley  <rweather@southern-storm.com.au>

* image/java_loader.c: implement a Java class file to IL converter.

* include/il_jopcodes.h: copy "codegen/jv_opcodes.h" to "include" directory.

* include/il_meta.h, include/il_image.h: new constants relevant to Java.

* image/pecoff_loader.c (ILImageLoad), image/image.h (_ILImageJavaLoad),
image/Makefile.am: hook the Java class loading functionality to "ILImageLoad".

* include/Makefile.am: add "il_jopcodes.h" to the "include" make.

* ildasm/ildasm_main.c (dumpFile): recognise IL_IMAGETYPE_JAVA as a
legitimate image type.

* dumpasm/dump_flags.c (ILMethodImplementationFlags): add implementation
flags that are relevant to Java class files.

* image/meta_build.c (Load_MethodDef): mask off Java-related flags
to prevent potentional security breaches.

2001-08-15  Rhys Weatherley  <rweather@southern-storm.com.au>

* codegen/cg_decls.tc, codegen/cg_misc.tc, codegen/cg_nodes.tc,
codegen/jv_decls.tc, codegen/jv_misc.tc, cscc/Makefile.am,
cscc/cs_decls.tc, cscc/cs_grammar.y, cscc/cs_misc.tc: apply a
patch from Norman Stevens <norman@arcady.u-net.com> that adds
most of the node creation functionality to the C# grammar.

* cscc/cs_decls.c, cscc/cs_ident.c: removed obsolete files.

* codegen/cg_gen.c (CreateBasicImage): build the correct "blank" image.

* codegen/cg_output.h, codegen/cg_output.c (ILGenModulesAndAssemblies),
cscc/cs_main.c (main): dump modules assemblies to the assembly stream.

* codegen/cg_scope.c (ILScopeResolveType): reverse name and namespace
arguments for library lookups, and import library classes into the
main image properly.

* codegen/cg_decls.tc (GenDiscard-ClassDefn): specify the image pointer
when dumping class names for parents and interfaces so that the correct
scope information is output.

* dumpasm/dump_ident.c (ILDumpClassName): prefix module scopes with ".module".

* doc/debug.html: removed because the text is now in "pnettools.texi".

* ilasm/ilasm.1: fixed doc bugs and moved syntax to texinfo documentation.

* doc/pnettools.texi, doc/pnetasm.texi, doc/Makefile.am: completed
translation of manpage documentation to texinfo format.

2001-08-14  Rhys Weatherley  <rweather@southern-storm.com.au>

* pnet.spec: applied patch submitted by mdaniel to create RPM spec file.

* ilfind/ilfind.1: removed mention of '-V', which isn't supported.

* cscc/cscc.1: added a description of the "__JVM__" macro, moved
plug-in section completely to the texinfo documentation, and added
the "-mjvm" option.

* doc/texinfo.tex: added to support texinfo documentation make's.

* doc/pnettools.texi: first draft documentation for all development tools.

* configure.in, Makefile.am, doc/Makefile.am: makefile changes to build
texinfo documentation.
