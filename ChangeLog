
2002-04-23  Rhys Weatherley  <rweather@southern-storm.com.au>

	* support/pt_thread.c: fix problems with "resumeRequested" flag.

	* configure.in, include/il_config.h.in: add "usleep" to the set
	of functions that are autoconf'ed.

	* include/il_thread.h, support/README.threads, support/no_thread.c,
	support/pt_thread.c, support/w32_thread.c: implement some more
	thread primitives; unblock the pthreads cancel signal during
	thread suspends; describe what needs to be done to add a new
	thread package.

	* tests/.cvsignore, tests/Makefile.am, tests/test_thread.c:
	add the beginnings of a regression test suite for threading.

2002-04-23  Rhys Weatherley  <rweather@southern-storm.com.au>

	* include/il_thread.h, support/Makefile.am, support/no_thread.c,
	support/pt_include.h, support/pt_mutex.c, support/pt_thread.c,
	support/pt_wait.c: continue implementing threading primitives.

	* acconfig.h, configure.in, include/il_config.h.in,
	libgc/misc.c, libgc/include/private/gcconfig.h, support/hb_gc.c:
	enable libgc's threading support for Win32/Cygwin.

	* support/Makefile.am, support/no_thread.c, support/pt_include.h,
	support/pt_mutex.c, support/pt_thread.c, support/pt_wait.c,
	support/thr_choose.h, support/w32_mutex.c, support/w32_thread.c:
	begin implementing Win32 thread routines and centralise the
	detection of thread packages into "thr_choose.h".

	* image/Makefile.am, image/meta_types.c, image/misc.c,
	image/misc_token.c, image/types.c, support/Makefile.am,
	support/alloc.c, support/allocate.c, support/convert.c,
	support/cvt_float.c: rename some source files that had duplicate
	names because it was causing breakpoint problems in gdb.

2002-04-23  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/HACKING: describe more of the engine architecture.

	* configure.in, include/Makefile.am, include/il_thread.h,
	support/Makefile.am, support/no_thread.c, support/pt_include.h,
	support/pt_thread.c: begin adding threading primitives, based
	on pthreads.

2002-04-22  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_gen.c, codegen/cg_gen.h, cscc/common/cc_main.c:
	never use the ".library" builtin unless the "-fbuiltin-library"
	command-line option is supplied; create AssemblyRef's for all
	libraries that are specified by "-l" options.

	* cscc/csharp/cs_decls.tc: add the "beforefieldinit" flag to
	classes that need it.

	* codegen/cg_gen.c, codegen/cg_gen.h, codegen/cg_output.c,
	cscc/common/cc_errors.c: add security attributes to the output
	image if unsafe constructs are used in the source program.

	* image/meta_build.c (Load_MemberRef): scan up the class
	hierarchy to resolve a member because C# compilers output
	the direct parent class in "base.X" expressions, even if
	"X" lives in an indirect ancestor.

	* csdoc/doc_backend.h, csdoc/doc_main.c, csdoc/doc_valil.c,
	csdoc/status.sh: process multiple "-fimage" options in "csdocvalil".

2002-04-21  Gopal.V  <gopalv82@symonds.net>

	* csdoc/doc_test.c : Test stubber for ECMA classes , added
	csdoc2test to create stub test classes.

2002-04-21  Rhys Weatherley  <rweather@southern-storm.com.au>

	* support/spawn.c (ILSpawnProcess): pass the first few options
	directly on the command-line instead of in the response file.

	* csant/csant_cscc.c (BuildCscCommandLine): pass "/noconfig" in
	addition to "/nostdlib" to csc, because "/nostdlib" only turns
	off mscorlib.dll, and not all standard libraries.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/Makefile.am, samples/System.Xml.dll,
	samples/System.dll, samples/mscorlib.dll: new versions after
	fixing build problems with System and System.Xml.

2002-04-20  Rhys Weatherley  <rweather@southern-storm.com.au>

	* ChangeLog, doc/ChangeLog-2: move the contents of "ChangeLog" to
	"doc/ChangeLog-2", because it was starting to get too big to manage.

	* engine/cvm.c, engine/cvm_dasm.c: profile "wide" instructions.

	* engine/cvm.h, engine/cvm_dasm.c, engine/cvm_ptr.c, engine/cvmc.c,
	engine/cvmc_obj.c, engine/null_coder.c, engine/verify_var.c,
	include/il_coder.h: introduce the "pread_this" and "iread_this"
	instructions into CVM to optimise the common cases of accessing
	fields relative to "this".

	* engine/cvm.c, engine/cvm_call.c, engine/cvmc.c, engine/ilrun.c,
	engine/method_cache.c, engine/method_cache.h, image/program.h:
	implement method profiling in the engine to get a picture of
	which methods in pnetlib are highly used.
