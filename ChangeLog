
2001-11-05  Rhys Weatherley  <rweather@southern-storm.com.au>

* ilasm/ilasm_build.h, ilasm/ilasm_build.c, ilasm/ilasm_grammar.y:
use a different nested class separator than '/' because Mercury wants
to use that within its identifiers.

* csant/Makefile.am, csant/.cvsignore, csant/csant.c, csant/csant_dir.c,
csant/csant_dir.h, csant/csant_cscc.c, csant/csant_defs.h, csant/csant_build.c,
csant/csant_parse.c, csant/csant_prop.c, csant/csant_task.c, configure.in,
Makefile.am: add the "csant" program to the build tree.

2001-11-04  Rhys Weatherley  <rweather@southern-storm.com.au>

* engine/verify_arith.c, engine/verify_const.c, engine/verify_ptr.c,
engine/verify_branch.c, engine/verify_conv.c: make sure that the
"typeInfo" part of a stack item is zeroed after arithmetic instructions.
This is needed to prevent confusion between "I" used as numeric,
pointer, and delegate types.

* engine/verify.c: modify "TypeToEngineType" and "AssignCompatible"
to pass method pointers around the system as type "I".

* include/il_coder.h, engine/ilverify.c, engine/verify_call.c,
engine/cvmc.c, engine/cvmc_call.c: verification for "ldftn" and "ldvirtfn".

* engine/verify.c: modify some comments.  The latest ECMA spec does
allow verifiable method pointers after all.

* engine/cvm.h, engine/cvm_dasm.c, engine/cvm_call.c, engine/cvmc_call.c:
implement the CVM parts of "ldftn", "ldvirtfn", and "ldinterfftn".

* libffi/x86/win32.S: include <ffi_private.h> to define constants such
as "FFI_TYPE_FLOAT", etc.

2001-11-03  Rhys Weatherley  <rweather@southern-storm.com.au>

* ChangeLog, doc/ChangeLog-1: move the contents of "ChangeLog" to
"doc/ChangeLog-1", because it was starting to get too big to manage.
