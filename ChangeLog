
2002-12-18 Gopal.V  <gopalv82@symonds.net>
	
	* support/dir.c: reset errno inside ILDeleteDir().

2002-12-18  Aditya P. Bansod <abansod@fullenergy.com>

	* configure.in, engine/lib_dir.c, include/il_sysio.h, support/dir.c:
	implement internal calls for System.IO.Directory.Move(). 
	(Patch #857,Gopal)

2002-12-17 Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_semantics.tc, cscc/csharp/cs_attrs.c: Implement
	double lookups for Attribute names to ensure that 'Attribute' suffixes
	are added correctly.
	
2002-12-17  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/Makefile.am, cscc/cscc.c, cscc/common/cc_options.c,
	cscc/common/cc_options.h: look for plugins in install-relative
	locations.

	* cscc/common/cc_options.c (CCAddPathStrings): bail out if the
	path specification is NULL.

	* cscc/cscc.c (SearchPath): bug in previous check-in that caused
	it to reference the wrong path.

2002-12-16 Gopal.V  <gopalv82@symonds.net>
	
	* codegen/cg_resolve.c: Prevent infinite lookups in conversion
	operators by preventing the conversion from being attempted again
	with args of the same implicit operator.

2002-12-16  Rhys Weatherley  <rweather@southern-storm.com.au>

	* include/il_system.h, support/Makefile.am, support/path.c:
	centralize the path-searching code to make it easier to vary
	the install location on systems such as Win32.

	* engine/lib_dir.c, support/dir.c: shift the system-specific
	parts of "DirMethods.GetPathInfo" into the "support" directory.

	* image/link.c, image/Makefile.am: modify the assembly search
	paths to use the routines in "support/path.c".

	* configure.in: export the CC variable to the configure scripts
	for libffi and libgc, to ensure that the "-mno-cygwin" flag
	is passed down correctly.

	* libgc/mark.c, libgc/win32_threads.c: work around problems
	with "__try" under mingw32 compilers.

	* configure.in: suppress "-lm" when compiling under mingw32, so
	that we get the math routines in "msvcrt.dll", not "cygwin1.dll".

	* support/path.c (TailEquals): reversed test in previous check-in.

	* support/dir.c (ILOpenDir): append "*.*" to directories under Win32.

	* csant/csant_cscc.c: add properties to specify the locations of
	"cscc-cs" and "cscc-c-s" for the cscc compiler.

	* support/cmdline.c, support/spawn.c: improve response file
	handling for mingw32 systems.

	* support/cmdline.c: expand wildcards on the command-line.

	* support/cmdline.c: map "*.*" to "match everything", even filenames
	that don't include a ".", to be consistent with standard Windows
	practice.

	* support/cmdline.c: sort the results of a wildcard match.

	* engine/ilrun.c: automatically append ".exe" to the name
	of the IL application if it was omitted.

	* support/file.c (ILFileExists): perform the ".exe" handling
	on both cygwin and mingw32.

2002-12-15  Aditya P. Bansod <abansod@fullenergy.com>

	* engine/lib_dir.c: Fill in the invalidChars array in PathInfo
	structure (Patch #823,Gopal).

2002-12-15  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/cscc.c, include/il_utils.h, support/cmdline.c: suppress
	'/' compatibility options when "ilasm" and "ilalink" are called
	from "cscc".

	* include/il_regex.h, include/Makefile.am, support/Makefile.am,
	support/regex.c: check in the glibc regex routines so that we
	have consistent regex support across all platforms.

	* csant/Makefile.am, csant/csant_dir.c, csant/csant_fileset.c,
	ilfind/Makefile.am, ilfind/ilfind.c: modify csant and ilfind to
	use the builtin pnet regex routines.

	* doc/pnettools.texi, ilfind/ilfind.1: update the ilfind manual
	to remove the "documented bug" about needing a POSIX-compatible
	regex library.

	* configure.in, engine/Makefile.am, engine/lib_regexp.c,
	ildb/Makefile.am, ilnative/Makefile.am, include/il_utils.h,
	support/Makefile.am, support/regexp.c, tests/Makefile.am:
	use the builtin pnet regex routines in "lib_regexp.c"; remove
	all references to the system regex library from the build system.

2002-12-14  Rhys Weatherley  <rweather@southern-storm.com.au>

	* ildb/ildb.1, ildb/Makefile.am: add the manpage for ildb.

2002-12-12 Gopal.V  <gopalv82@symonds.net>

	* support/numformat.c, support/Makefile.am, engine/lib_format.c,
	engine/Makefile.am, include/il_utils.h: Remove the redundant ILFormatReal
	function from CVS.

	* support/regexp.c, engine/lib_regexp.c, include/il_utils.h: Allow the
	group matches to be returned for further use.

2002-12-13  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/Makefile.am, cscc/cscc.c, ilasm/Makefile.am,
	ilasm/ilasm.c, ilasm/ilasm_build.c, ilasm/ilasm_build.h,
	ilasm/ilasm_data.c, ilasm/ilasm_data.h, ilasm/ilasm_grammar.y,
	ilasm/ilasm_main.c, ilasm/ilasm_output.c, ilasm/ilasm_output.h:
	turn "ilasm" into a library that can be directly linked into
	"cscc", and then link it into "cscc".

	* support/cmdline.c: rearrange the command-line so that '/'
	options always come first if the command supports them.

	* ilalink/Makefile.am, ilalink/link_main.c, ilasm/ilasm_main.c:
	implement options for "ilalink" that make it compatible with "al";
	hard link "al" to point to "ilalink".

	* ilalink/link_main.c: force "resourcesOnly" if there are only
	"/embed" options on the linker command-line.

	* doc/pnettools.texi, ildasm/ildasm.1, ildasm/ildasm_class.c,
	ildasm/ildasm_internal.h, ildasm/ildasm_main.c, ildasm/ildasm_method.c:
	implement '/' compatibility options for "ildasm".

	* engine/int_proto.h, ilnative/ilinternal.c: rename "errno" to
	"error", to prevent problems on platforms that define "errno"
	as a macro.

	* configure.in, csant/csant_defs.h, csant/csant_dir.c,
	csant/csant_fileset.c, csdoc/doc_html.c, csdoc/doc_stub.c,
	engine/Makefile.am, engine/lib_charinfo.c, engine/lib_math.c,
	engine/lib_socket.c, ildb/Makefile.am, image/link.c,
	include/il_values.h, support/cmdline.c, support/dir.c,
	support/filemap.c, support/regexp.c, support/socket.c,
	support/spawn.c, support/test_float.c, support/time.c:
	apply changes to compile in non-cygwin modes under Win32.

	* cscc/csharp/cs_misc.tc: fix a warning.

2002-12-12 Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_grammar.y, cscc/csharp/cs_defs.tc, 
	cscc/csharp/cs_misc.tc: Filter out base destructor calls
	when compiling System.Object.

	* cscc/csharp/cs_grammar.y: fix no-args attribute support and
	allow () to be specified.

	* cscc/csharp/cs_gather.c: Report errors when access modifiers
	are different for overrriden and overriding methods (Bug #1968).

	* cscc/csharp/cs_gather.c: Revamp the error message to use the
	C# '.' instead of '::' and remove the 'virtual' message.

2002-12-12  Rhys Weatherley  <rweather@southern-storm.com.au>

	* image/lib_attrs.c (MarshalAsAttribute): fix the "LPArray"
	marshalling type in the case of an unspecified element type:
	use "MAX" instead of "END" to indicate unspecified (Bug #1951).

	* cscc/cscc.c, ilasm/Makefile.am: install a second copy of
	"ilasm" into "${prefix}/lib/cscc/plugins" and use it by default,
	to prevent problems with Mono installing its own "ilasm" over
	the top of ours.

	* image/sig_writer.c (WriteType): fix the writing of multi-dimensional
	array types (Bug #1961).

	* ilasm/ilasm_main.c, ilasm/ilasm_output.c, ilasm/ilasm_output.h,
	support/cmdline.c: add Microsoft command-line syntax compatibility
	support to "ilasm".

2002-12-11  Dawkins, David  <david.dawkins@brooks-pri.com>

	* make_patch.sh: warn the user if updates occurred during the
	"cvs update" step of "make_patch.sh".

2002-12-11  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/cscc.c, cscc/common/cc_options.c, cscc/common/cc_options.h:
	handle the case of a resource-only link for sattelite assemblies.

	* support/locale.c (ILGetCultureName): formatting error when
	getting the name of the current culture from "LANG".

	* engine/int_proto.h, engine/int_table.c, engine/lib_reflect.c:
	add the "Assembly.GetSatellitePath" internalcall.

	* configure.in: add the missing "access" system call to configure.in.

2002-12-11  Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_oper.tc: Implement AddressOf operator to generate
	references from expressions.

	* cscc/csharp/cs_grammar.y, cscc/csharp/cs_defs.tc,cscc/csharp/cs_stmt.tc:
	Check in the ILNode_Fixed for the ILNode_FixAddress access. 

	* cscc/csharp/cs_oper.tc: SemanticAnalysis for the dereferencing
	operator.

	* cscc/csharp/cs_modifiers.c: Allow 'extern' properties to be 
	defined.

2002-12-10  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_stmt.tc: remove a warning.

	* tools/pnet_build.README, tools/pnet_build.cfg, tools/pnet_build.sh:
	update the "pnet_build.sh" script to match the current repository
	layout and to dump information about the system and tool versions.

	* .cvsignore, HACKING, README, madcow: add the "madcow" script,
	for diagnosing common build problems.

2002-12-10  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_defs.tc, cscc/csharp/cs_grammar.y,
	cscc/csharp/cs_stmt.tc: implement Using(...) {} statement
	for the IL codegen.

	* cscc/csharp/cs_misc.tc: Use ILNode_SemAnalysisType for 
	typeof arguments.

2002-12-09  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/c/c_defs.tc, cscc/c/c_grammar.y, cscc/c/c_oper.tc,
	cscc/c/c_stmt.tc: infer the size of an array from its initializer.

	* engine/cvm.c, engine/cvm_arith.c, engine/cvm_compare.c,
	engine/cvm_conv.c, engine/lib_math.c, include/il_values.h,
	support/test_float.c: work around bugs in "isinf" on platforms
	that incorrectly return 1 for negative infinity.
 
2002-12-09  Gopal.V  <gopalv82@symonds.net>
	
	* engine/verify.c: Allow storing native ints to byref and pointer
	locations.

	* engine/verify.c: Modify AssignCompatible to check for elemtypes
	and ranks for array data types.

2002-12-08  Rhys Weatherley  <rweather@southern-storm.com.au>
 
	* engine/mkint.sh: look in the pnetlib sources for the assemblies
	to convert, instead of in pnet/samples, since the pre-compiled
	assemblies in pnet/samples will be going away soon.

	* Makefile.am, configure.in, csunit/Makefile.am,
	csunit/NUnitEmulation.cs, csunit/README, csunit/Test.cs,
	csunit/TestArray.cs, csunit/TestAssertFailed.cs, csunit/TestCase.cs,
	csunit/TestException.cs, csunit/TestFailure.cs, csunit/TestMain.cs,
	csunit/TestResult.cs, csunit/TestStop.cs, csunit/TestSuite.cs,
	csunit/TestVersion.cs.in, csunit/TestWriterResult.cs,
	csunit/csunit-run.sh, csupport/Complex.cs, csupport/Crt0.cs,
	csupport/FileTable.cs, csupport/LongDouble.cs, csupport/LongJmp.cs,
	csupport/Makefile.am, csupport/Markers.cs, csupport/README:
	remove the contents of "csunit" and "csupport", because they
	are now a part of "pnetlib".

	* samples/.cvsignore, samples/I18N-handlers.def, samples/I18N.CJK.dll,
	samples/I18N.MidEast.dll, samples/I18N.Other.dll,
	samples/I18N.Rare.dll, samples/I18N.West.dll, samples/I18N.dll,
	samples/Makefile.am, samples/README, samples/README.mscorlib,
	samples/System.Xml.dll, samples/System.dll, samples/codepage.cs,
	samples/except.cs, samples/fib.cs, samples/getenv.cs,
	samples/httpsrv.cs, samples/mscorlib.dll, samples/pnetlib.here:
	remove the C# samples and pre-compiled assemblies from pnet.

	* engine/engine.h, engine/layout.c, image/program.h: add "native"
	offset information to fields, to allow for the possibility of
	native structures with different layout from their managed
	counterparts.

2002-12-08  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_gen.h,cscc/common/cc_main.c: add noStdlibFlag and 
	builtinLibFlag to ILGenInfo to ensure that the correct System classes 
	are being used.

	* cscc/csharp/cs_defs.tc, cscc/csharp/cs_grammar.y, 
	cscc/csharp/cs_types.tc, cscc/csharp/cs_lvalue.tc,cscc/csharp/cs_gather.c
	: Fix for Bug 1900 in savannah. To resolve System classes correctly.

	* cscc/csharp/cs_types.tc: add code to allow for -fbuiltin-library
	and -nostdlib to be used together.

	* codegen/cg_gen.h,cscc/common/cc_main.c: remove the two flags.

	* cscc/csharp/cs_invoke.tc: Check instance accesses for parameters of
	delegate creation expressions.

2002-12-08  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/int_proto.h, engine/int_table.c, engine/internal.c,
	include/il_engine.h: rename an instance of "namespace" in the
	"il_engine.h" header file to prevent problems with C++ compilers;
	update the internalcall tables from the latest pnetlib.

2002-12-06 Nguyen, Thong <tum@veridicus.com>

	* engine/lib_thread.c, engine/int_proto.h, engine/int_table.c: 
	Added implementation of internal functions for wait events.  Fixed 
	values returned from InternalWaitAny.

	* include/il_thread.h: Added prototypes for wait event methods.

	* support/Makefile.am: Added wait_event.c to build list.

	* support/thr_defs.h: Added structs and other definitions to
	support wait events.

	* support/wait.c: Fixed bugs in WaitAny and WaitAll. WaitAny would 
	not return the correct index value if any handle could be acquired 
	immediately.WaitAll would block indefinitely if all handles could be
	aquired immediately.

	* support/wait_event.c: Support functions for waitable events.
	(Patch ID: 781, Gopal)

2002-12-06  Dawkins, David  <david.dawkins@brooks-pri.com>

	* .cvsignore: Add confdefs.h to cvsignore list (Gopal)

2002-12-06  Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_lvalue.tc: consider 'null' as an object for 
	member access.

2002-12-06  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_lvalue.tc (ILNode_MemberProperty): use the correct
	form of method call for "base.XXX" property sets.

2002-12-05  Gopal.V  <gopalv82@symonds.net>

	* engine/lib_marshal.c, engine/int_proto.h, engine/int_table.c:
	Add the internal calls to support Marshal.PtrToStruct()

2002-12-04  Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_grammar.y: fix the handling of empty initializers
	for arrays.

	* cscc/csharp/cs_invoke.tc: fix minor bug in CSBestCandidate in
	selecting between multiple candidates.

2002-12-04  Dawkins, David  <david.dawkins@brooks-pri.com>

	* acconfig.h, configure.in, cscc/c/Makefile.am,
	cscc/csharp/Makefile.am, ilasm/Makefile.am: remove the need for
	acconfig.h so that newer autoconf's don't complain about it
	(patch modified by Rhys for interoperability with older autoconf's).

2002-12-03  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_lvalue.tc: Add missing line numbers to local var.

	* engine/lib_reflect.c: partial implementation of FieldInfo.GetValue()
	
2002-12-02  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_arith.tc: Fix the optimize bug to fix the issue of
	long truncation.

	* codegen/cg_arith.tc: Fix another small bug in division reduction.

	* cscc/csharp/cs_lvalue.tc: Fix function calls on enum members.

	* codegen/cg_stmt.tc: Fix the label for break statement in foreach
	loops.

2002-12-02  Rhys Weatherley  <rweather@southern-storm.com.au>

	* pnet.spec: remove from the CVS server, as it is auto-generated.

	* .cvsignore, aclocal.m4, auto_gen.sh, include/.cvsignore,
	include/il_config.h.in, tools/mkrelease: remove files from
	the CVS server that cause problems with different versions
	of automake/autoconf.

	* engine/lib_string.c: bug in string construction and CharFill
	that caused it to use the wrong pointer in "char[]" arrays.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: update all assemblies from pnetlib.

2002-12-01  Stephen Compall  <rushing@sigecom.net>

	* pnet.spec.in: Fixed man page filespecs to support multiple
	compression methods (cross-distro).  Rewrote descriptions from
	their defaults on the site, and the sub-descriptions that depended
	on the main, for better advertising.  Changed RPM's default CFLAGS
	to use -O2 instead of -O3, to allow the main interpreter loop to
	compile.

	* configure.in: support out of tree builds for libffi and libgc.

2002-12-01  David Dawkins <david.dawkins@brooks-pri.com>

	* resgen/resgen.c: Support cygwin/text-mode file systems. Open 
	files for binary output with "wb", then with "w" if that fails.
	(Gopal)

2002-12-01  Gopal.V  <gopalv82@symonds.net>
	
	* configure.in, include/il_config.h.in, support/dir.c ,
	include/il_sysio.h, engine/lib_dir.c ,engine/int_table.c, 
	engine/int_proto.h: Add the ChangeDirectory methods

	* engine/int_table.c : Add ChangeDirectory to the internal
	tables.

2002-12-01  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/cvm.h, engine/cvm_dasm.c, engine/cvm_ptr.c:
	add the "get2d" and "set2d" instructions to the CVM instruction
	set to help speed up 2D array operations.

2002-11-30  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_misc.tc, codegen/cg_nodes.tc, codegen/jv_misc.tc,
	cscc/c/c_stubs.tc, cscc/csharp/cs_lvalue.tc: support the use
	of "this" as an l-value within struct's.

	* csunit/TestWriterResult.cs: prevent double reporting of
	csunit test failures in the final count.

2002-11-23  Gopal.V  <gopalv82@symonds.net>

	* .cvsignore: add pnet.spec to cvsignore

2002-11-29  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/Makefile.am, engine/int_proto.h, engine/int_table.c,
	engine/lib_dir.c, engine/lib_info.c, engine/lib_task.c: introduce
	the "Platform.InfoMethods" class for random environment information.

	* configure.in, include/il_config.h.in: add "isatty" and "getlogin"
	to the list of functions that are detected at configuration time.

	* csunit/TestMain.cs: make "csunit" more robust when testing the
	ECMA-compatible version of pnetlib.

2002-11-28  James McParlane  <james@massive.com.au>

	* configure.in: add the "--disable-optimizations" flag to
	assist with building on certain platforms.

2002-11-28  Rhys Weatherley  <rweather@southern-storm.com.au>

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: check in new assemblies with string
	formatting and cryptography fixes.

	* ildasm/ildasm_method.c: bug in the dumping of "ldc.i8" arguments,
	which caused the words to be reversed in the output.

	* ilasm/ilasm_scanner.l: stop at 3 octal digits or 2 hex digits
	when processing escape sequences inside strings in the assembler.

	* csharp/cscc/cs_lvalue.tc: incorrect negation of int64 constants
	when converting field constants.

	* support/mul_long.c (ILUInt64MulOvf): explicitly cast 32-bit
	subcomponents to 64 bits before multiplying, to prevent truncation.

	* samples/mscorlib.dll: updated assembly after fixing 64-bit
	constant multiplication.

	* codegen/cg_gen.c, codegen/cg_gen.h, codegen/cg_nodemap.c,
	codegen/cg_nodemap.h, cscc/common/cc_main.c: reset the state of
	"overflowInsns" to the global value when jumping to another class
	to perform semantic analysis on a member, as the state at the
	jump point may not match the required state at the destination.

	* engine/int_proto.h, engine/int_table.c, engine/lib_task.c:
	add the "TaskMethods.GetRuntimeVerison" internalcall.

	* samples/mscorlib.dll: updated assembly with latest pnetlib changes.

2002-11-27  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_varusage.h , codegen/cg_varusage.c, codegen/cg_gen.h,
	codegen/cg_nodes.tc: Add support code for implementing flow analysis.

	* codegen/Makefile.am: Add cg_varusage.c to the build

	* codegen/cg_arith.tc: add constant folding for string concat.

2002-11-27  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/engine.h, engine/lib_crypt.c, engine/process.c: implement the
	internalcall for cryptographically secure random number generation.

	* engine/lib_crypt.c: make the cryptographic routines a little
	more robust in the face of NULL algorithm handles.

2002-11-26  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/lib_crypt.c (_IL_CryptoMethods_SameKey): ignore the DES
	parity bit when checking Triple-DES key components for equality.

	* engine/pecoff_writer.c: output the correct relocation offset
	in the ".reloc" section for the benefit of Windows systems.

	* codegen/cg_decls.tc (ILNode_ClassDefn): output a ".size 1"
	declaration in empty "struct" types to match C# requirements
	that a value type can never be zero-sized.

	* image/pecoff_writer.c (_ILWriteFinal): back-patch the correct
	address for the ".reloc" section in the optional PE/COFF header.

2002-11-25  Rhys Weatherley  <rweather@southern-storm.com.au>

	* image/context.c (ILContextGetAssembly): if "mscorlib" is not
	found, then search for "corlib" instead.

2002-11-23  Gopal.V  <gopalv82@symonds.net>
	
	* pnet.spec, pnet.spec.in, configure.in: remove old pnet.spec and
	autogenerating from pnet.spec.in 

2002-11-23  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/verify_call.c: fix the verification of tail calls to
	use the correct length of the "call" instruction.

	* libffi/src/types.c: add type size and alignment information
	for the IA64 architecture.

	* engine/lib_socket.c: add the "volatile" keyword to chosen places
	in the "HostToNetworkOrder" functions to prevent gcc optimizing away
	important code that is needed for the conversion.

	* NEWS, configure.in: update version for the "0.4.8" release.

	* configure.in: update working version to "0.4.9".

2002-11-22  Gopal.V  <gopalv82@symonds.net>

	* engine/lib_regexp.c, support/regexp.c, support/Makefile.am,
	engine/Makefile.am, configure.in, engine/int_proto.h,
	engine/int_table.c: Added basic regexp support to the engine.

	* engine/lib_dir.c, engine/int_table.c: Rename Platform.FileInfo to 
	Platform.InternalFileInfo.

	* engine/lib_dir.c: Fix an entry I missed the last time.

2002-11-22  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/Makefile.am, ildb/Makefile.am, ilnative/Makefile.am,
	tests/Makefile.am: add $REGEXLIBS to makefiles that require it.

	* include/il_config.h.in: update "il_config.h.in" using the
	latest "configure.in".

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: update all assemblies from pnetlib.

	* doc/pnet_faq.html: update the FAQ.

	* samples/README.mscorlib: remove the reference to Microsoft's C#
	compiler, because we don't need it any more.

	* support/regexp.c: make sure that <sys/types.h> is included
	before <regex.h>, as BSD systems require it to be present.

	* csunit/Makefile.in: remove a file that shouldn't be in CVS.

	* ildb/ildb_context.c, ildb/ildb_context.h, ildb/ildb_list.c,
	ildb/ildb_search.c, ildb/ildb_source.c, ildb/ildb_source.h:
	load source files correctly into the debugger; use EXINIT for
	the tab stop specification in "list" commands.

2002-11-21  Gopal.V  <gopalv82@symonds.net>
	
	* codegen/cg_arith.tc, cscc/csharp/cs_oper.tc: Move the reduction in
	strength operations from semanalysis to codegen .

2002-11-21  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_misc.tc, codegen/cg_nodes.tc, codegen/jv_misc.tc,
	cscc/c/c_stubs.tc, cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_oper.tc:
	replace calls to "Array.get_Length" with "ldlen" on simple arrays.

	* support/spawn.c (ILSpawnProcess): use "execvp" instead of "execv"
	to ensure that PATH is searched when launching programs from csant.

	* cscc/csharp/cs_grammar.y: prevent an infinite error recovery
	loop if the programmer writes "namespace XXX }" instead of
	"namespace { XXX }".

	* engine/int_proto.h, engine/int_table.c: update the internalcall
	tables from pnetlib.

	* cscc/c/c_library.c, cscc/c/c_types.c, cscc/csharp/cs_grammar.y:
	remove the obsolete "IL_META_TYPEDEF_VALUE_TYPE" flag from struct
	types in the compiler.

	* cscc/csharp/cs_gather.c: interface overrides must be "final"
	if they aren't "virtual".

	* cscc/csharp/cs_gather.c: fully qualify explicit interface
	override names.

	* csdoc/doc_valil.c: recognise the name forms of "AttributeTargets"
	enum values to reduce the number of erroneous "AttributeUsage" reports.

	* csdoc/doc_valil.c: handle references to attributes in foreign
	assemblies.

	* image/lib_attrs.c: recognise the "Serializable" and "NonSerialized"
	attributes as builtin library attributes.

	* image/lib_attrs.c: remove "IndexerName" from the underlying
	assembly because it isn't supposed to exist outside the compiler.

	* codegen/cg_library.c, codegen/cg_nodes.tc, cscc/csharp/cs_attrs.c,
	cscc/csharp/cs_decls.tc, cscc/csharp/cs_gather.c,
	cscc/csharp/cs_internal.h: add the "DefaultMember" attribute to
	classes that have indexers.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: check in the cscc-compiled version of pnetlib.

2002-11-20  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_gen.h, cscc/common/cc_options.c, cscc/common/cc_main.c,
	cscc/csharp/cs_oper.tc: Implement a simple optimization for reducing
	multiply and divide operations with shift operations.

2002-11-19  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_invoke.tc: improve the error message that results
	when a base/this constructor call cannot be resolved.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll, samples/System.Xml.dll,
	samples/System.dll, samples/mscorlib.dll: update all assemblies
	from pnetlib.

	* codegen/cg_arith.tc: use "rem.un" to modulus unsigned integer types.

	* csunit/Makefile.am, csunit/Makefile.in, csunit/NUnitEmulation.cs,
	csunit/TestCase.cs: emulate some of the NUnit test API within csunit
	so that is is easier to integrate foreign NUnit tests into pnetlib.

2002-11-19  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_oper.tc: Add a number of linenum & filename copies
	for node replacements to restore sanity to error messages.

	* cscc/csharp/cs_semantics.tc: Use ILNode_SemAnalysisType for the
	CSSemType operation.

	* codegen/cg_coerce.c: Implement explicit multiple conversions using
	GetIndirectConvertRules and remove explicit flag from sub-conversions.

	* codegen/cg_coerce.c: Add extra cases of compatible conversions, with
	explicit conversions .

	* cscc/csharp/cs_lvalue.tc: disable error reporting if 
	ILNode_SemAnalysisType fails.

2002-11-18  Robert Hwang <hwang_rob@yahoo.ca>

	* image/member.c, image/class.c, include/il_program.h: a patch to allow
	nested class to access protected members in base class of containing 
	class.(Gopal)

2002-11-16  Jonathan Springer  <jonathan.springer@verizon.net>

	* codegen/cg_nodes.tc, cscc/csharp/cs_decls.tc: Break out static
	constructor processing to ensure processing in textual order is
	maintained.  (Cause of bug #1665 -- Closed.)

2002-11-17  Gopal.V  <gopalv82@symonds.net>
	
	* engine/engine.h, engine/internal.c, engine/process.c, include/il_engine.h
	,engine/convert.c: Enable addition of external internal calls as process
	locals.

	* codegen/cg_optable.c: Override numeric type promotion for boolean data
	types.

	* codegen/cg_scope.c: A split in the scope tree for aliases are added .

2002-11-16  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_oper.tc: Correct a minor fix in coercion of the 
	argument parameters.

	* codegen/cg_coerce.c, codegen/cg_coerce.h, codegen/cg_resolve.c, 
	cscc/csharp/cs_gather.c, cscc/csharp/cs_oper.tc, cscc/csharp/cs_stmt.tc:
	Allow for multiple step coercions with user defined operators.

	* cscc/csharp/cs_gather.c, codegen/cg_scope.c, codegen/cg_scope.h:
	Fix the scope of aliases so that cscctest gives the correct error
	messages.

	* codegen/cg_coerce.c, codegen/cg_coerce.h, cscc/c/c_invoke.tc,
	cscc/csharp/cs_attrs.c,cscc/csharp/cs_cast.tc, cscc/csharp/cs_invoke.tc,
	cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_misc.tc, cscc/csharp/cs_stmt.tc:
	Protect ILCoerce indirect mode from going into an infinite loop.

	* codegen/cg_resolve.c, cscc/csharp/cs_oper.tc, cscc/csharp/cs_decls.tc:
	Correct the remaining ILCoerce declarations as well.
	
	* codegen/cg_coerce.c: Allow indirect coercions only when we are checking
	for user defined operators.

	* cscc/csharp/cs_grammar.y: Inherit the local scope to namespaces declared
	inside a compilation unit.
	
	* codegen/cg_scope.c: Fix circularity bug in resolving namespaces by
	merging the using namespace and using alias scopes into a single scope.
	
	* codegen/cg_scope.c: Correct the last checkin , the circularity bug
	was not actually fixed for all cases.
	
2002-11-15  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_lvalue.tc, codegen/cg_scope.c, codegen/cg_scope.h,
	cscc/csharp/cs_grammar.y, cscc/csharp/cs_lookup.c, 
	cscc/csharp/cs_internal.h, cscc/csharp/cs_defs.tc:	Rework the 
	UsingAlias code to simplify alias lookups and straighten out the
	alias substitutions to operate at lowest priority.
	
	* cscc/csharp/cs_lvalue.tc, codegen/cg_scope.c, cscc/csharp/cs_grammar.y, 
	cscc/csharp/cs_lookup.c, codegen/cg_scope.h, cscc/csharp/cs_internal.h, 
	cscc/csharp/cs_defs.tc: Create a seperate localScope for looking up 
	aliases so that they do not spillover to other files.


2002-11-15  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_misc.tc, cscc/csharp/cs_invoke.tc, engine/cvmc.c,
	engine/cvmc_call.c, engine/null_coder.c, engine/verify_call.c,
	include/il_coder.h: use "callvirt" instead of "call" to call
	non-virtual instance methods, so that runtime null pointer
	checks happen automatically.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: update the compiled version of all assemblies.

2002-11-14  Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_oper.tc: Do parameter coercion for UserBinary
	operators.

	* engine/verify_ptr.c: Fix verification of stobj instruction so
	that MS compiled System.dll verifies.

2002-11-14  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/int_proto.h, engine/int_table.c, engine/lib_encoding.c,
	include/il_utils.h, samples/mscorlib.dll, support/locale.c:
	integrate the culture-determination code.

	* samples/mscorlib.dll, samples/I18N.dll: updated version with
	the latest culture support.

	* samples/mscorlib.dll: fix for "String.Equals(String)".

2002-11-13  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_grammar.y: generate a warning when a no-body
	non-extern constructor is encountered.

	* csdoc/doc_stub.c: fix a long outstanding bug concerning default
	output paths.

	* cscc/csharp/cs_gather.c: Rename attribute definitions to force the
	"Attribute" suffix .

	* codegen/cg_cast.tc: Add a do-nothing case to handle ManagedValues
	to Objects (Structs -> Objects).

	* codegen/cg_nodes.tc, cscc/csharp/cs_stmt.tc, codegen/cg_stmt.tc,
	codegen/cg_misc.tc: Replace ILGenCast with ILGenPrepareForThisAccess
	for GetEnumerator calls.

2002-11-11  Jonathan Springer <jonathan.springer@verizon.net>

	* engine/lib_string.c: Corrected some exception handling to follow ECMA
	spec more closely.
	
2002-11-12  Gopal.V  <gopalv82@symonds.net>
	
	* cscc/csharp/cs_grammar.y, cscc/csharp/cs_invoke.tc: add support for
	indexers supporting variable number of parameters (params).

	* cscc/csharp/cs_invoke.tc: handle null args for params methods by
	passing null directly instead of wrapping in an array.

2002-11-10  Jonathan Springer <jonathan.springer@verizon.net>

	* engine/lib_string.c:  Fix small bug affecting StringBuilder.Insert().

2002-11-09  Jonathan Springer <jonathan.springer@verizon.net>

	* codegen/cg_lvalue.c, cscc/csharp/cs_internal.h, cscc/csharp/cs_lookup.c,
	cscc/csharp/cs_lvalue.tc: now accepts types such as 
	'System.Net.Dns' even if 'System.Net' isn't a "using" namespace.  Keep an
	eye on this one -- cscctest works but there may be subtle consequences.

	* cscc/csharp/cs_cast.tc, cscc/csharp/cs_const.tc,
	cscc/csharp/cs_decls.tc, cscc/csharp/cs_invoke.tc,
	cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_misc.tc, cscc/csharp/cs_oper.tc,
	cscc/csharp/cs_semantics.tc, cscc/csharp/cs_stmt.tc,
	cscc/cshart/cs_types.tc:  On Rhys advice, define ILSemAnalysisType(ILNode)
	and remove the plethora of stub definitions that had been in place.
	
2002-11-09  Gopal.V  <gopalv82@symonds.net>

	* support/dir.c: commit fix to prevent readdir_r from choking at
	the end of directory.

2002-11-09  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_internal.h, cscc/csharp/cs_invoke.tc,
	cscc/csharp/cs_lookup.c: when a candidate method is found in a child
	class, ignore all candidates in the parent, even if the parent
	candidates are "better".

2002-11-08  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_stmt.tc: Allow 'foreach' even if they do not implement
	IEnumerable.

	* cscc/csharp/cs_oper.tc: Perform constant coercion before operator 
	lookup for arithmetic operations. 
	
	* cscc/csharp/cs_oper.tc: Remove constant coercion for ">>" and
	"<<" operators.

2002-11-07  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/lib_gc.c: remove all class checks from GC.SuppressFinalize
	and GC.ReRegisterForFinalize, to be consistent with other CLR
	implementations.

	* samples/System.dll: add extra collection classes.

	* samples/mscorlib.dll: add a number of non-ECMA reflection attributes.

	* support/dir.c: remove an outstanding reference to "d_type".

2002-11-06  Gopal.V  <gopalv82@symonds.net>
	
	* engine/lib_gc.c: Allow inherited methods to invoke GC.SuppressFinalize
	on instances . (Replace '==' with ILClassInheritsFrom)

	* codegen/cg_misc.tc: a patch for ObjectCreationExpression to generate 
	the original ILMachineTypes instead of _MV or _O .

2002-11-06  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_stmt.tc (ILNode_Try): make sure that the finally
	block's try range covers the catch clauses.

	* cscc/csharp/cs_modifiers.c (ValidateCalling): report an error
	if a virtual or abstract method is declared private.

	* cscc/c/c_defs.tc, cscc/c/c_lvalue.tc, cscc/c/c_oper.tc:
	fix the use of "&" on arrays.

	* engine/ilrun.c: report a better message than "virtual memory
	exhausted" when an exception occurs that cannot be converted
	into a string for some reason.

	* image/class.c, image/image.h, image/synthetic.c: convert
	non-array types such as pointer and byref types into synthetic
	classes, so that they can be encapsulated during reflection.

	* engine/lib_type.c (GetTypeName): build the correct name
	for pointer, reference, and custom-modified types.

	* include/il_system.h, engine/time.c: change the prototypes for
	"ILCLIToUnixTime" and "ILUnixToCLITime" so that they don't
	rely upon "time_t" for their definition.

	* engine/lib_dir.c, include/il_sysio.h, support/dir.c:
	make the directory scanning routines more opaque and handle
	platforms that don't have "d_type".

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: update all assemblies from pnetlib, with
	the reflection ToString and I18N patches.

	* engine/lib_type.c (ResolveAssembly): resolve explicit assembly
	names that are used with "Type.GetType".

	* samples/mscorlib.dll: fix to "Activator.CreateInstance".

2002-11-05  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_grammar.y: Fix the indexername returned , using
	an ILInternString of the variable name value.

2002-11-05  Robert Hwang <hwang_rob@yahoo.ca>

	* cscc/csharp/cs_oper.tc: fix the CoerceArrayInit to conduct
	coercion on the *parent obtained from SemAnalysis . (Gopal).

2002-11-05  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_gen.c, cscc/csharp/cs_gather.c: fix an order of
	compilation problem in "mscorlib.dll" with "params" parameters.

	* codegen/jv_assign.tc: remove obsolete function.

	* cscc/csharp/cs_semvalue.h: clean up the list of semantic kinds.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll, samples/mscorlib.dll:
	update all assemblies from pnetlib.

	* engine/int_proto.h, engine/int_table.c: update the internalcall
	tables from the latest mscorlib.dll.

	* support/numformat.c: make sure that "il_config.h" is included
	to define HAVE_SNPRINTF.

	* NEWS, configure.in: update version for the "0.4.6" release.

	* configure.in: update working version to "0.4.7".

2002-11-03  Richard Baumann <biochem333@nyc.rr.com>
	
	* support/numformat.c, support/Makefile.am, include/il_utils.h: Add an
	ILFormatReal for number formatting.

	* configure.in, include/il_config.h.in: Checks for `sprintf' used in
	number formatting.
	
	* engine/lib_numformat.c, engine/Makefile.am: Add icalls needed for
	System.Private.NumberFormatter.

	* engine/internal.c, engine/int_table.c, engine/int_proto.h: Entries
	into the correct tables for internal calls.

2002-11-03  Robert Hwang <hwang_rob@yahoo.ca>
	
	* codegen/cg_cast.tc: fix typo in ILGenCastConst for casts tp
	Float64

2002-11-03  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_nodes.tc, codegen/cg_lvalue.tc, cscc/csharp/cs_lvalue.tc:
	Enable base access for properties by adding a baseCall variable to
	ILNode_MemberProperty

	* cscc/csharp/cs_grammar.y: process IndexerName attribute for indexers
	before starting the TypeGather phase. (hack)

	* cscc/csharp/cs_grammar.y: Fix error in previous commit for and 
	support a prefix for an indexer for implementing an	interface 
	indexer.

2002-11-03  Rhys Weatherley  <rweather@southern-storm.com.au>

	* support/Makefile.am: add missing "queue.c" to Makefile.am.

2002-11-02  Charles Schuller  <kyeran@hermes-solutions.biz>

	* support/queue.c, include/il_utils.h, support/Makefile.am: add a 
	queue implementation using linked lists (commit by Gopal)

	* engine/lib_dir.c, support/dir.c: make the readdir_r syscall
	work by removing repeated calls by using a queue 

	* include/il_sysio.h: remove the void* catch all typedef to make
	the errors in porting more visible.

2002-11-01  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_arith.tc: prevent ILNativeFloat from generating
	add.ovf,mul.ovf or sub.ovf instructions in checked mode.

	* codegen/cg_optable.c, codegen/cg_coerce.c, codegen/cg_coerce.h: 
	add an unsafe mode to conversions and implement conversions from
	`void*' to int and long types.

2002-10-31  Sylvain Pasche <sylvain_pasche@yahoo.fr>
	
	* codegen/jv_output.c,ilasm/ilasm_grammar.y, ilasm/ilasm_output.c, 
	ilasm/ilasm_output.h, ilasm/ilasm_scanner.l, image/java_writer.c,
	include/il_writer.h: Support for Exceptions , some todos, typos
	and documentation for the JVM assembler. (commited by Gopal) 
	
2002-10-31  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_scanner.l (ParseEncodedChar): advance the "text"
	pointer when reading UTF-8 characters from the source.

2002-10-31  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_misc.tc: Generate addresses instead of values while
	unboxing basic valuetypes. (stloc.0,ldloca.s 0)

	* codegen/cg_misc.tc: Rearrange code in previous commit from 
	ILNode_Unbox to ILGenPrepareThisForAccess.

2002-10-30  Robert Hwang <hwang_rob@yahoo.ca>

	* cscc/cshar/cs_decls.tc: Fix enum bug by saving and restoring 
	the info->currentMethod	for each ClassDefn .

2002-10-28  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_cast.tc: Use ILNode_SemAnalysisType for the
	UserCast expression as well.
	
2002-10-27  Jonathan Springer  <jonathan.springer@verizon.net>
	* cscc/csharp/cs_oper.tc, cscc/csharp/cs_types.tc:  Add coercion of
	constants to unsigned for assignment operators (e.g. '+=').  Extend
	Type Semantics to array creation NewExpressions.

2002-10-27  Jonathan Springer  <jonathan.springer@verizon.net>
	* codegen/cg_gen.c, codegen/cg_gen.h, cscc/csharp/cs_cast.tc,
	cscc/csharp/cs_const.tc, cscc/csharp/cs_decls.tc, 
	cscc/csharp/cs_internal.h, cscc/csharp/cs_invoke.tc
	cscc/csharp/cs_lookup.c, cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_misc.tc,
	cscc/csharp/cs_oper.tc, cscc/csharp/cs_semantics.tc,
	cscc/csharp/cs_stmt.tc, cscc/csharp/cs_types.tc:
	Fixed Gopal's infamous 'class Foo {...} ... int Foo; Foo.Bar()' bug.
	Also removed the state introduced a few corrections back in favor of
	a new method 'ILNode_SemAnalysisType'.  Most of the files modified are
	to add default implementations of 'ILNode_SemAnalysisType'.

2002-10-27  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_lookup.c: Add members of 'Object' to all
	lookups in interface instances.

2002-10-27  Richard Baumann <biochem333@nyc.rr.com>

	* support/time.c: fixed a bug in ILGetTimeZoneAdjust. An
	hour was being added to the west-of-gmt offset instead of
	subtracted, when dst is in effect.

2002-10-26  Jonathan Springer <jonathan.springer@verizon.net>

	* codegen/cg_gen.c, codegen/cg_gen.h, cscc/csharp/cs_internal.h,
	cscc/csharp/cs_invoke.tc, cscc/csharp/cs_lookup.c,
	cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_semantics.tc,
	cscc/csharp/cs_stmt.tc:  Add a state to the compiler so it knows
	when the identifiers being parsed should resolve to a type and
	acts appropriately.

2002-10-27  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_oper.tc: Coercion of constants in arithmetic
	expressions. (ie 0 will match ulong in arithmetic operations).

	* cscc/csharp/cs_oper.tc: Coercion of constants for equality
	and inequality expressions.

	* cscc/csharp/cs_oper.tc: Fix last commit as they broke cscctest.

2002-10-26  Richard Baumann <biochem333@nyc.rr.com>

	* support/file.c, support/time.c, engine/lib_dir.c, include/il_sysio.h,
	include/il_system.h: implemented the file/dir get*time icalls.

2002-10-26  Jonathan Springer <jonathan.springer@verizon.net>

	* codegen/cg_misc.tc, cscc/csharp/cs_invoke.tc: Use argument expression
	node to allow coercion of constants in functions.  (e.g. 0 will match
	ulong when determining candidate functions.)

2002-10-25  Jonathan Springer <jonathan.springer@verizon.net>

	* cscc/common/cc_main.c:  Change error parsing to accomodate bison 1.75.

2002-10-24  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/int_proto.h, engine/int_table.c, samples/I18N.CJK.dll,
	samples/I18N.MidEast.dll, samples/I18N.Other.dll,
	samples/I18N.Rare.dll, samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll, samples/mscorlib.dll:
	update the assemblies and re-generate the internalcall tables.

	* ilasm/ilasm_output.c (ILAsmOutAddTryBlock): set "lastException"
	to the correct value when there are multiple handlers for a block.

2002-10-23  Gopal.V  <gopalv82@symonds.net>

	* support/dir.c,include/il_sysio.h,engine/lib_dir.c,
	support/Makefile.am: Fix the GetFilesInDirectory, so that
	CVS build works

2002-10-23  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/lib_dir.c: temporarily disable GetFilesInDirectory
	because it won't build until pnetlib has been updated.

	* engine/lib_reflect.c: eliminate a warning.

2002-10-22  Gopal.V  <gopalv82@symonds.net>

	* configure.in,include/il_config.h.in,support/dir.c,
	include/il_sysio.h,engine/lib_dir.c,support/Makefile.am:
	Commit Charles Schuller's patches for 
	DirMethods.GetFilesInDirectory()

2002-10-22  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/Makefile.am, codegen/cg_all.tc, codegen/pm_arith.tc,
	codegen/pm_nodes.tc, codegen/pm_output.c, codegen/pm_output.h:
	begin to fill out the treecc nodes for Parrot code generation.

	* codegen/pm_output.c: use Parrot's "cmod" instruction for remainder,
	instead of "mod", to get the correct C-like semantics.

2002-10-21  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/pm_output.c, codegen/pm_output.h: check in the
	support code for Parrot code generation (incomplete and
	doesn't compile yet).

	* codegen/pm_output.c: change the xor operator from "^" to "~",
	to be compatible with the Perl-ish conventions of imcc.

2002-10-21  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_gen.h, codegen/cg_nodes.tc, codegen/cg_stmt.tc, 
	codegen/jv_stmt.tc, cscc/csharp/cs_stmt.tc: Implement ILNode_GotoCase
	and ILNode_GotoDefault

2002-10-21  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_assign.tc, codegen/jv_assign.tc, cscc/csharp/cs_oper.tc:
	prevent double-evaluation of l-values in operator assignment,
	and update Java assignment.

	* cscc/c/c_oper.tc: update assignment operator semantic analysis
	for the C front-end.

2002-10-20  Jonathan Springer <jonathan.springer@verizon.net>

	* codegen/cg_assign.tc, codegen/jv_assign.tc, cscc/csharp/cs_oper.tc:  
	Restore function of += and -= operators for Events.

2002-10-20  Gopal.V  <gopalv82@symonds.net>

	* codegen/cg_optable.c: Add builtin operator << and >> to
	enums .

2002-10-19  Jonathan Springer <jonathan.springer@verizon.net>

	* cscc/c/c_grammar.y, cscc/csharp/cs_grammar.y: remove duplicate
	declarations to satisfy the newly pedantic Bison.

	* cscc/csharp/cs_semvalue.h: remove a second #define of
	CS_SEMKIND_TYPE_NODE.

	* codegen/cg_assign.tc, codegen/cg_nodes.tc, cscc/csharp/cs_oper.tc:
	re-engineer portions of assignment expressions (e.g. +=) to work on
	integers smaller than 32 bits w/o crashing the code generator.

2002-10-18  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/method_cache.c (_ILCacheSetCookie): check "method"
	for NULL before trying to set the cookie, just in case the
	system is out of memory.

2002-10-18  Gopal.V  <gopalv82@symonds.net>

	* ilasm/ilasm_grammar.y: approve & commit Sasa Jovanic's (sasa_j@mail.ru)
	patch for Bison 1.5 errors.

	* cscc/csharp/cs_gather.c: convert the Errors in ReportDuplicates into
	Warnings. Similarly for the 'override' warnings.

	* cscc/csharp/cs_stmt.tc: Fix typo in CompareCaseLabels() for 
	ILMachineType_String.

2002-10-17  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/verify.c: turn off verify debug mode, accidentally
	checked in by Gopal.

2002-10-16  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_grammar.y: implement the general catch
	statement to use Exception when type is unspecified.

2002-10-14  Jonathan Springer <jonathan.springer@verizon.net>

	* codegen/cg_coerce.c, codegen/cg_optable.c: Fixed segmentation
	fault in prior patch. Added equality and inequality operators 
	for unmanaged pointers.

2002-10-15  Gopal.V  <gopalv82@symonds.net>

	* engine/lib_reflect.c : Implement DeserialzeAttribute to
	read CustomAttribute.

2002-10-12  Jonathan Springer <jonathan.springer@verizon.net>

	* codegen/cg_coerce.c: Allow casting among unmanaged pointers
	and basic integer types when in unsafe code blocks.

2002-10-08  Gopal.V  <gopalv82@symonds.net>

	* engine/lib_string.c (String.Replace): Fix truncation bug in
	String.Replace(String,String)

2002-10-06  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/jv_output.c, codegen/jv_output.h, codegen/jv_stmt.tc:
	apply Sylvain's patches to generate the correct form of Java
	"tableswitch" instructions.

2002-10-05  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_stmt.tc (ILNode_Foreach): use the correct types
	when creating the "doCast" node.

	* ilasm/ilasm_grammar.y, ilasm/ilasm_main.c, ilasm/ilasm_output.c,
	ilasm/ilasm_output.h, image/Makefile.am, image/class.c,
	image/image.h, image/java_loader.c, image/program.h, image/writer.c,
	include/il_writer.h: apply the Java assembler patches from Sylvain.

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: new assemblies with latest pnetlib changes.

2002-09-28  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_arith.tc, codegen/cg_library.c, codegen/cg_relop.tc,
	codegen/jv_arith.tc, cscc/csharp/cs_oper.tc: fix string and object
	comparisons.

	* configure.in, include/il_config.h.in, csant/csant_dir.c:
	convert Win32 paths using Cygwin functions, to ensure that the
	correct filenames are passed to "csc".

	* codegen/cg_resolve.c, cscc/csharp/cs_stmt.tc: scan the parents
	of interface classes in "foreach"; make "foreach" robust against
	failure of property/method resolution.

	* cscc/csharp/cs_stmt.tc (ILNode_Foreach): fix a crash bug related
	to "foreach" over multi-dimensional arrays.

	* cscc/csharp/cs_lvalue.tc: use the array form of a "params"
	parameter inside a method; not the element form.

2002-09-27  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_stmt.tc (ILNode_EndsInReturnImpl): flow control issue
	with "if(x) ... else if(y) ..." statements.

	* acconfig.h, configure.in, include/il_config.h.in: add the
	"HAVE_CPP_PRECOMP" flag to "il_config.h", to detect if the
	C pre-processor needs the "-no-cpp-precomp" flag.

	* codegen/cg_misc.tc, codegen/cg_nodes.tc, codegen/jv_misc.tc,
	cscc/csharp/cs_invoke.tc, cscc/csharp/cs_lookup.c,
	cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_semvalue.h: re-implement
	the handling for "ILNode_BaseAccess", because the previous strategy
	wasn't working for all "base.Identifier" cases.

	* cscc/csharp/cs_cast.tc (CSTypeToName): use the correct names
	for "native int" and "native unsigned int".

	* codegen/cg_coerce.c (GetConvertRules): convert the from and to
	types into their class forms using "ILTypeToClass" rather than
	"ILType_ToClass" and "ILType_ToValueType", to make sure that
	"IntPtr" and "UIntPtr" are handled correctly.

	* codegen/cg_misc.tc (ILGenPrepareForThisAcces): recognise "Decimal"
	as a valid managed value type.

	* cscc/csharp/cs_lookup.c: do not ignore virtual overrides when
	searching for "base" members.

2002-09-26  Jonathan Springer <jonathan.springer@verizon.net>

	* engine/ilverify.c: add full method signatures to ilverify
	output.

2002-09-20  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_lvalue.tc: convert "out" parameters into
	l-values, not s-values, to be consistent with other C# compilers.

	* codegen/cg_decls.tc, codegen/cg_stmt.tc, codegen/jv_stmt.tc,
	cscc/c/c_builtin.tc, cscc/c/c_function.c, cscc/csharp/cs_decls.tc,
	cscc/csharp/cs_stmt.tc: rearrange the implementation of
	"ILNode_EndsInReturnImpl" to make it easier to detect break,
	continue, etc.

	* codegen/cg_stmt.tc (ILNode_EndsInReturnImpl): implement for
	"while", "do", and "for".

	* codegen/cg_stmt.tc (ILNode_EndsInReturnImpl): implement for "switch".

	* engine/lib_socket.c: include extra headers to define "AF_INET".

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: update all assemblies from pnetlib.

	* engine/layout.c (LayoutClass): use explicit layout for fields
	even if the class layout information was omitted.

	* image/member (ILFieldNewToken): move pre-referenced fields to
	the end of the class to ensure that they stay in the same order
	with respect to definition.

2002-09-19  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_attrs.c: implement named attribute arguments.

	* codegen/cg_decls.tc, cscc/csharp/cs_decls.tc: process attributes
	for fields and events.

	* cscc/csharp/cs_attrs.c: coerce named arguments to their final types.

	* codegen/cg_decls.tc, cscc/csharp/cs_decls.tc: output the correct
	class flags when modified by library attributes.

	* codegen/cg_lvalue.tc (ILNode_MemberField): bug fix to GenRef,
	which caused it to drop "this" when accessing value type fields.

	* cscc/csharp/cs_gather.c: normalise all delegate declarations
	to "native int", not "native unsigned int".

	* engine/verify_obj.c (IL_OP_LDFLDA): verifier bug fix.

2002-09-18  Rhys Weatherley  <rweather@southern-storm.com.au>

	* image/Makefile.am, image/ser_writer.c, include/il_serialize.h:
	add library code to "image" to write serialized attribute values.

	* cscc/csharp/cs_attrs.c, cscc/csharp/cs_decls.tc, image/lib_attrs.c:
	turn on real compilation of attributes and implement the serialization
	functionality.

	* cscc/csharp/cs_attrs.c (ProcessAttr): minor bug fix for a core
	dump on zero-argument attributes.

2002-09-17  Rhys Weatherley  <rweather@southern-storm.com.au>

	* engine/convert.c, include/il_gc.h, support/def_gc.c, support/hb_gc.c:
	suppress finalization during "ConvertMethod" to prevent it from
	being recursively re-entered from "ILGCAllocPersistent".

	* cscc/c/c_oper.tc (ILNode_AddressOf): remove the "&" operator
	from an expression that involves a function reference, as it is
	redundant.

2002-09-16  Rhys Weatherley  <rweather@southern-storm.com.au>

	* samples/I18N.CJK.dll, samples/I18N.MidEast.dll,
	samples/I18N.Other.dll, samples/I18N.Rare.dll,
	samples/I18N.West.dll, samples/I18N.dll,
	samples/System.Xml.dll, samples/System.dll,
	samples/mscorlib.dll: update all of the assemblies from pnetlib.

	* cscc/c/c_invoke.tc: problem with the detection of function
	pointers during function invocation.

	* ildasm/ildasm_method.c (DumpToken): dump stand-alone signatures
	for methods correctly.

	* engine/verify_call.c (SameSignature): reversed tests when
	checking "calli" signatures.

	* engine/cvm_call.c (COP_CALLI): do not increment the pc
	after entering the new method.

2002-09-15  Gopal.V  <gopalv82@symonds.net>

	* cscc/csharp/cs_lvalue.tc (ILNode_MemberAccess): set the rvalues 
	for all the constant valuetypes before doing member lookup.
	
	* codegen/cg_gen.c (ILValueTypeToType): Add ILMachineType_Decimal
	to the switch statement

2002-09-14  Gopal.V  <gopalv82@symonds.net>
	
	* engine/int_proto.h, engine/int_table.c, engine/lib_socket.c,
	support/dns.c, support/Makefile.am, include/il_sysio.h : Implement 
	the internalcalls and support functions for dns lookup

	* configure.in, include/il_config.h.in : Checks for netdb.h ,
	gethostbyname() and gethostbyaddr() .
	
2002-09-14  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/c/c_coerce.c (GetCoerceRules): don't strip off the
	function pointer prefix when checking for pointer coercions.

	* cscc/c/c_grammar.y (ProcessDeclaration): allow function
	types to be defined with "typedef".

	* ilasm/ilasm_output.c (Squash): adjust the start of a
	switch reference if the reference is above another one
	that is being squashed.

	* cscc/c/c_lvalue.tc, cscc/c/c_typeout.c, ilalink/link_create.c,
	ilalink/link_field.c, ilalink/link_method.c, ilasm/ilasm_build.c:
	make sure that field modifiers are preserved throughout the toolchain.

2002-09-13  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/c/c_oper.tc: compare the element types in "==", not the
	whole types, to determine if we are comparing distinct types.

	* cscc/c/c_grammar.y: finalize the declaration specifier in a
	function definition prior to calling "CFunctionCreate", to prevent
	the return type defaulting to "int".

2002-09-12  Rhys Weatherley  <rweather@southern-storm.com.au>

	* support/file.c (ILSysIOOpen): bug in the conversion of
	file access modes from C#-style to POSIX-style.

2002-09-10  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_coerce.h, codegen/cg_optable.c, cscc/csharp/cs_oper.tc:
	implicitly coerce zero to enumerated types in binary operators.

2002-09-09  Rhys Weatherley  <rweather@southern-storm.com.au>

	* codegen/cg_gen.c (ILGenGetParamInfo): resolve the method before
	looking for "ILParameter" blocks, because method references don't
	have such blocks associated with them.

2002-09-07  Rhys Weatherley  <rweather@southern-storm.com.au>

	* cscc/csharp/cs_const.tc, cscc/csharp/cs_lvalue.tc,
	cscc/csharp/cs_oper.tc, cscc/csharp/cs_semvalue.h: improve
	constant evaluation for operators.

	* cscc/csharp/cs_cast.tc: constant evaluation for cast operators.

2002-09-05  Rhys Weatherley  <rweather@southern-storm.com.au>

	* Makefile.am, configure.in, ilheader/.cvsignore, ilheader/Makefile.am,
	ilheader/ilheader.1, ilheader/ilheader.c: add the "ilheader" utility,
	which generates .h files from C# assemblies.

	* engine/layout.c: fix a reversed test in "ComputeInterfaceTable".

2002-09-03  Rhys Weatherley  <rweather@southern-storm.com.au>

	* ChangeLog, doc/ChangeLog-3: move the contents of "ChangeLog" to
	"doc/ChangeLog-3", because it was starting to get too big to manage.

	* cscc/csharp/Makefile.am, cscc/csharp/cs_attrs.c,
	cscc/csharp/cs_cast.tc, cscc/csharp/cs_const.tc,
	cscc/csharp/cs_decls.tc, cscc/csharp/cs_defs.tc,
	cscc/csharp/cs_invoke.tc, cscc/csharp/cs_lookup.c,
	cscc/csharp/cs_lvalue.tc, cscc/csharp/cs_misc.tc,
	cscc/csharp/cs_oper.tc, cscc/csharp/cs_semantics.tc,
	cscc/csharp/cs_semvalue.c, cscc/csharp/cs_semvalue.h,
	cscc/csharp/cs_stmt.tc, cscc/csharp/cs_types.tc: change the
	usage of the "CSSemValue" type so that it is accessed via macros
	instead of direct fields; this will make it easier to change the
	representation in the future.
