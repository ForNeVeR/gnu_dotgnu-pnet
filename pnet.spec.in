Name: pnet
Version: @VERSION@
Release: custom
Source: http://www.southern-storm.com.au/download/%{name}-%{version}.tar.gz
License: GPL
Vendor: DotGNU
BuildRoot: %{_tmppath}/%{name}-%{version}-root
Group: System/Emulators
BuildRequires: flex, bison, treecc
Summary: The DotGNU Portable .NET tools
%description
The goal of this project is to build a suite of Free Software tools to
build and execute portable executable (.NET, JavaTM, Parrot)
applications, including compilers, an assembler, a disassembler, and
runtime engine capable of executing multiple stack-based bytecode
formats.

%package interpreter
Summary: The DotGNU Portable .NET runtime engine
Group: System/Emulators
%description interpreter
The Converted Virtual Machine supports executing multiple kinds of
portable executables, including IL (".NET") and JavaTM classes.

%package compiler
Summary: The Portable .NET compiler collection
Group: System/Compilers
%description compiler
The cscc compiler collection allows multiple input languages and
multiple output bytecodes, much like GCC.  Current languages include
C\# and C; current output formats include IL assembly (".NET"), JavaTM
assembly, and imcc (Parrot (Perl6) high-level assembly).

# TODO: where/when include C compiler?

%package tools
Summary: Miscellaneous tools for DotGNU Portable .NET
Group: System/Tools
%description tools
The general toolkit provided along with the pnet compiler and runtime
engines.  This includes csant, a replacement for make, and various
tools to deal with IL binaries.

%prep
%setup -q
%build
export CFLAGS=$(echo $RPM_OPT_FLAGS|sed -e 's!-O3!-O2!g')
%configure
make
%install
make DESTDIR=${RPM_BUILD_ROOT} install
%clean
if test "/" != "${RPM_BUILD_ROOT}"; then rm -rf ${RPM_BUILD_ROOT}; fi

%files interpreter
%doc AUTHORS COPYING ChangeLog INSTALL NEWS README
/usr/bin/ilrun
/usr/share/man/man1/ilrun.1*

%files compiler
%doc AUTHORS COPYING ChangeLog INSTALL NEWS README
/usr/bin/cscc
/usr/bin/csant
/usr/bin/ilasm
/usr/bin/ilalink
/usr/bin/resgen
/usr/lib/cscc/plugins/cscc-cs
/usr/lib/cscc/plugins/cscc-csharp
/usr/share/man/man1/resgen.1*
/usr/share/man/man1/ilasm.1*
/usr/share/man/man1/cscc.1*

%files tools
%doc AUTHORS COPYING ChangeLog INSTALL NEWS README
/usr/bin/ildb
/usr/bin/ildasm
/usr/bin/ildiff
/usr/bin/ildd
/usr/bin/ilfind
/usr/bin/ilsize
/usr/bin/ilnative
/usr/bin/ilverify
/usr/bin/csdoc
/usr/bin/csdoc2html
/usr/bin/csdoc2hier
/usr/bin/csdoc2texi
/usr/share/man/man1/ilfind.1*
/usr/share/man/man1/ildd.1*
/usr/share/man/man1/ilsize.1*
/usr/share/man/man1/ilnative.1*
/usr/share/man/man1/ildiff.1*
/usr/share/man/man1/csdoc*
/usr/share/info/pnettools.info*

%changelog
* Wed Nov 27 2002 Stephen Compall <rushing@sigecom.net> 0.4.8-2
- Updated descriptions of packages
- Changed man files to handle multiple man-install schemes
- Added fix for gcc failure on -O3 compile

# Local variables:
# mode: rpm-spec
# end:
